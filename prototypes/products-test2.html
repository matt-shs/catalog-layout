<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Tagify Paste Split + Clear Fixed</title>

<link href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>

<style>
body {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  margin: 18px;
  background: #f7fafc;
}
.controls {
  display: flex;
  gap: 10px;
  align-items: center;
  width: 100%;
  background: #fff;
  padding: 12px;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(2,6,23,0.06);
}
.controls .tagify {
  flex: 1 !important;
  min-width: 0;
}
.controls button {
  flex: 0 0 auto;
  padding: 10px 16px;
  border-radius: 8px;
  border: 0;
  background: #2563eb;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
  font-size: 14px;
  white-space: nowrap;
}
.controls button.clear-btn {
  background: #ef4444;
}
</style>
</head>
<body>

<div class="controls">
  <input id="skuInput" placeholder="Paste SKUs (comma or newline separated)" />
  <button id="lookupBtn">Lookup</button>
  <button class="clear-btn" id="clearBtn">Clear</button>
</div>

<script>
const inputElm = document.getElementById('skuInput');

// Initialize Tagify
const tagify = new Tagify(inputElm, {
  delimiters: /[,|\n|\r]/,
  maxTags: 200,
  duplicate: false
});

// Reliable Clear button
document.getElementById('clearBtn')
  .addEventListener('click', tagify.removeAllTags.bind(tagify));

// Intercept paste and split before Tagify processes
inputElm.addEventListener('paste', e => {
  e.preventDefault();

  const pasteText = (e.clipboardData || window.clipboardData).getData('text');
  const items = [...new Set(pasteText.split(/[\n\r,]+/).map(s => s.trim()).filter(Boolean))];

  // Add tags directly
  tagify.addTags(items);
});

// Lookup button example
document.getElementById('lookupBtn').addEventListener('click', () => {
  console.log('Current SKUs:', tagify.value.map(t => t.value));
});
</script>

</body>
</html>
